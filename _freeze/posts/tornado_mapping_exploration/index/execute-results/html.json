{
  "hash": "bdac5a65ea44d30f60f96886718a1098",
  "result": {
    "markdown": "---\ntitle: \"U.S Tornadoes\"\nauthor: \"jabir\"\neditor: visual\nimage: \"tornado.jpeg\"\n---\n\n\n## Data\n\nThis data-set is about the tornadoes that effected the U.S from 1950-2022 showing their magnitudes and other useful information\n\n### Data Dictionary\n\n| variable     | class     | description                                                                                                                                                                          |\n|------------------|------------------|-------------------------------------|\n| om           | integer   | Tornado number. Effectively an ID for this tornado in this year.                                                                                                                     |\n| yr           | integer   | Year, 1950-2022.                                                                                                                                                                     |\n| mo           | integer   | Month, 1-12.                                                                                                                                                                         |\n| dy           | integer   | Day of the month, 1-31.                                                                                                                                                              |\n| date         | date      | Date.                                                                                                                                                                                |\n| time         | time      | Time.                                                                                                                                                                                |\n| tz           | character | [Canonical tz database timezone](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones).                                                                                      |\n| datetime_utc | datetime  | Date and time normalized to UTC.                                                                                                                                                     |\n| st           | character | Two-letter postal abbreviation for the state (DC = Washington, DC; PR = Puerto Rico; VI = Virgin Islands).                                                                           |\n| stf          | integer   | State FIPS (Federal Information Processing Standards) number.                                                                                                                        |\n| mag          | integer   | Magnitude on the F scale (EF beginning in 2007). Some of these values are estimated (see fc).                                                                                        |\n| inj          | integer   | Number of injuries. When summing for state totals, use sn == 1 (see below).                                                                                                          |\n| fat          | integer   | Number of fatalities. When summing for state totals, use sn == 1 (see below).                                                                                                        |\n| loss         | double    | Estimated property loss information in dollars. Prior to 1996, values were grouped into ranges. The reported number for such years is the maximum of its range.                      |\n| slat         | double    | Starting latitude in decimal degrees.                                                                                                                                                |\n| slon         | double    | Starting longitude in decimal degrees.                                                                                                                                               |\n| elat         | double    | Ending latitude in decimal degrees.                                                                                                                                                  |\n| elon         | double    | Ending longitude in decimal degrees.                                                                                                                                                 |\n| len          | double    | Length in miles.                                                                                                                                                                     |\n| wid          | double    | Width in yards.                                                                                                                                                                      |\n| ns           | integer   | Number of states affected by this tornado. 1, 2, or 3.                                                                                                                               |\n| sn           | integer   | State number for this row. 1 means the row contains the entire track information for this state, 0 means there is at least one more entry for this state for this tornado (om + yr). |\n| f1           | integer   | FIPS code for the 1st county.                                                                                                                                                        |\n| f2           | integer   | FIPS code for the 2nd county.                                                                                                                                                        |\n| f3           | integer   | FIPS code for the 3rd county.                                                                                                                                                        |\n| f4           | integer   | FIPS code for the 4th county.                                                                                                                                                        |\n| fc           | logical   | Was the mag column estimated?                                                                                                                                                        |\n\n## Packages\n\npackages(\"ggplot2\")\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(maps)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'maps'\n\nThe following object is masked from 'package:purrr':\n\n    map\n```\n:::\n\n```{.r .cell-code}\nlibrary(mapproj)\nlibrary(usmap)\nlibrary(readr)\nlibrary(sf)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLinking to GEOS 3.8.0, GDAL 3.0.4, PROJ 6.3.1; sf_use_s2() is TRUE\n```\n:::\n\n```{.r .cell-code}\nlibrary(RColorBrewer)\nlibrary(esquisse)\n```\n:::\n\n\n## Explorations\n\n### What are the states most at risk?\n\nTexas is most at risk for tornadoes and some secondary states like florida.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#reading in the data\ntornado <- read_csv(\"tornado.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 68693 Columns: 27\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr   (2): tz, st\ndbl  (21): om, yr, mo, dy, stf, mag, inj, fat, loss, slat, slon, elat, elon,...\nlgl   (1): fc\ndttm  (1): datetime_utc\ndate  (1): date\ntime  (1): time\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nus_states <- map_data(\"state\")\n\ntornfixed <- tornado |>\n  select(st,ns) |>\n  mutate(region = recode(st,\n  \"AL\" = \"alabama\",\n  \"AK\" = \"alaska\",\n  \"AZ\" = \"arizona\",\n  \"AR\" = \"arkansas\",\n  \"CA\" = \"california\",\n  \"CO\" = \"colorado\",\n  \"CT\" = \"connecticut\",\n  \"DE\" = \"delaware\",\n  \"FL\" = \"florida\",\n  \"GA\" = \"georgia\",\n  \"HI\" = \"hawaii\",\n  \"ID\" = \"idaho\",\n  \"IL\" = \"illinois\",\n  \"IN\" = \"indiana\",\n  \"IA\" = \"iowa\",\n  \"KS\" = \"kansas\",\n  \"KY\" = \"kentucky\",\n  \"LA\" = \"louisiana\",\n  \"ME\" = \"maine\",\n  \"MD\" = \"maryland\",\n  \"MA\" = \"massachusetts\",\n  \"MI\" = \"michigan\",\n  \"MN\" = \"minnesota\",\n  \"MS\" = \"mississippi\",\n  \"MO\" = \"missouri\",\n  \"MT\" = \"montana\",\n  \"NE\" = \"nebraska\",\n  \"NV\" = \"nevada\",\n  \"NH\" = \"new hampshire\",\n  \"NJ\" = \"new jersey\",\n  \"NM\" = \"new mexico\",\n  \"NY\" = \"new york\",\n  \"NC\" = \"north carolina\",\n  \"ND\" = \"north dakota\",\n  \"OH\" = \"ohio\",\n  \"OK\" = \"oklahoma\",\n  \"OR\" = \"oregon\",\n  \"PA\" = \"pennsylvania\",\n  \"RI\" = \"rhode island\",\n  \"SC\" = \"south carolina\",\n  \"SD\" = \"south dakota\",\n  \"TN\" = \"tennessee\",\n  \"TX\" = \"texas\",\n  \"UT\" = \"utah\",\n  \"VT\" = \"vermont\",\n  \"VA\" = \"virginia\",\n  \"WA\" = \"washington\",\n  \"WV\" = \"west virginia\",\n  \"WI\" = \"wisconsin\",\n  \"WY\" = \"wyoming\",\n  \"DC\" = \"district of columbia\"\n)) |>\n  select(region,ns)\n\ntorn_totals <- tornfixed |>\n  group_by(region) |>\n  summarize(n_tornadoes = sum(ns))\n\n\nmap <- left_join(us_states,torn_totals)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nJoining with `by = join_by(region)`\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmap |>\n  ggplot(aes(long, lat, group = subregion)) +\n  geom_map(\n    aes(map_id = region),\n    map = us_states\n  ) +\n  geom_polygon(aes(group = group, fill = n_tornadoes), color = \"black\") +\n  scale_fill_gradient2(low = \"blue\", mid = \"white\", high = \"red\") +\n  coord_quickmap()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n### What state usually have the most tornadoes?\n\nIt looks like Texas has had the most tornadoes over the years\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmost_tornadoes <- tornado |>\n  select(st,ns) |>\n  group_by(st) |>\n  summarise(n = n()) |>\n  arrange(desc(n)) |>\n  top_n(10)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nSelecting by n\n```\n:::\n\n```{.r .cell-code}\nmost_tornadoes |>\n  ggplot(aes(x = reorder(st, -n), y = n)) +\n  geom_bar(stat = \"identity\", fill = \"#d16002\") +\n  labs(\n    title = \"States with the most tornadoes over the years\",\n    x = \"states in abbreviations\",\n    y = \"number of tornadoes\"\n  ) +\n  theme_dark()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n#### But i want to see which state has had the most tornadoes in the past 5 years?\n\nTexas is in the top 10 in 3 of the past 5 years Texas has the most in 2019,2022 and 2020.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npast5 <- tornado |>\n  select(st,ns,yr) |>\n  filter(yr %in% c(\"2018\",\"2019\",\"2020\",\"2021\",\"2022\"), st %in% c(\"TX\",\"OK\",\"IA\",\"MS\",\"AL\")) |> \n  group_by(st,yr) |>\n  summarise(n = n()) |>\n  arrange(desc(n))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'st'. You can override using the `.groups`\nargument.\n```\n:::\n\n```{.r .cell-code}\npast5 |>\n  ggplot(aes(x = n, y = yr, color = st)) +\n  geom_line() +\n  labs(\n    title = \"Most Tornadoes In The Past 5 Years\",\n    subtitle = \"Showing the Unpredictability of Tornadoes\",\n    x = \"Number of Tornadoes\",\n    y = \"year\"\n  ) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npast5 |>\n  ggplot(aes(x = st, y = n, color = yr)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npast5 |>\n  ggplot(aes(x = st,y = n, fill = yr)) +\n  geom_bar(stat = \"identity\") +\n  labs(\n    title = \"Tornadoes over The Past 5 Years\",\n    subtitle = \"showing the impact more clearly\",\n    x = \"states\",\n    y = \"Number of Tornadoes\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n### What was the most dangerous tornado in the U.S between 1950-2022?\n\nThe tornado that was the most dangerous from 1950 to 2022 was the tornado in 2011 that happened in Missouri there were 158 fatalities the tornado was called Joplin.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntornado |>\n  select(st,mag,yr,fat) |>\n  filter(mag %in% \"5\",) |>\n  group_by(fat) |>\n  arrange(desc(fat))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 59 × 4\n# Groups:   fat [37]\n   st      mag    yr   fat\n   <chr> <dbl> <dbl> <dbl>\n 1 MO        5  2011   158\n 2 MI        5  1953   116\n 3 TX        5  1953   114\n 4 OK        5  1955    80\n 5 AL        5  2011    72\n 6 MS        5  1966    58\n 7 LA        5  1971    47\n 8 KS        5  1957    44\n 9 MS        5  1953    38\n10 OH        5  1974    36\n# ℹ 49 more rows\n```\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}